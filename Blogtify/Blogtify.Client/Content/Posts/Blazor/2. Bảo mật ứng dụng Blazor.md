---
url: [/post/bao-mat-ung-dung-blazor-voi-openidconnect]
title: "Bảo mật ứng dụng Blazor với OpenIdConnect"
$attribute: PostMetadata(Id = 2, Title = "Bảo mật ứng dụng Blazor với OpenIdConnect", Category = "Blazor", LastModified = "05-10-2025", IsDraft=true)
$layout: BlogContentLayout
---

Hôm nay chúng ta sẽ cùng khám phá một chủ đề cực kỳ quan trọng mà hầu hết 
ứng dụng nào cũng cần: Xác thực (Authentication) và phân quyền (Authorization) người dùng.

Với Blazor, OpenID Connect (OIDC) chính là chìa khóa để giải quyết bài toán 
này một cách chuẩn hóa và bảo mật.

# Biểu diễn User

Chúng ta không đơn thuần xem người dùng là một "username". Thay vào đó, Blazor 
sử dụng mô hình Claims-Based Security. 
Mỗi người dùng được biểu diễn bởi một tập hợp các "claims". Mỗi Claim là một mảnh thông tin về người dùng. 
Ví dụ: tên, email, vai trò (role), quyền (permission), ...

Trong Blazor, mọi thông tin người dùng được bao bọc trong đối tượng 
`AuthenticationState`, mà cụ thể là `ClaimsPrincipal` - đại diện cho toàn bộ ngữ cảnh bảo mật của người dùng hiện tại. 

# JSON Web Token (JWT)

Làm sao để Blazor App của chúng ta nhận diện được người dùng? Câu trả lời nằm 
ở JSON Web Token (JWT).

JWT giống như một tấm vé thông hành:
- Được cấp bởi bên đáng tin cậy (Identity Provider - IDP) như Auth0, Azure AD, Keycloak...
- Chứa mọi claims về người dùng
- Được ký số để app có thể xác minh tính toàn vẹn

Một JWT điển hình có dạng như sau:

Phần payload của JWT có thể decode được, nên đừng bao giờ lưu thông tin nhạy cảm như mật khẩu trong đó!

# OpenID Connect

Vậy Blazor "nói chuyện" với các Identity Provider như thế nào? Thông qua OpenID Connect!

OIDC cung cấp các flows khác nhau cho từng loại ứng dụng. Với Blazor, chúng ta thường sử dụng:

- Authorization Code Flow với PKCE: An toàn nhất cho Blazor WebAssembly
- Hybrid Flow: Phù hợp cho Blazor Server

Quy trình tổng quan khi Blazor app của bạn tích hợp OIDC:
1. Người dùng nhấn "Login" trong Blazor app
2. App chuyển hướng đến Identity Provider (Azure AD, Auth0, etc.)
3. Người dùng đăng nhập tại Identity Provider
4. Identity Provider gửi về JWT token cho Blazor app
5. Blazor app xác thực token và tạo ClaimsPrincipal. Người dùng đã được xác thực!

Trong Blazor, việc tích hợp OIDC cực kỳ đơn giản nhờ các thư viện có sẵn:
